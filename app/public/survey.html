<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Questions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

</head>

<body>

    <div class="container">
        <h2 class="text-left">Survey Questions</h2>
        <hr>
        <h3 class="text-left">About You</h3>
        <div class="form-group">
            <label for="name">
                <h4>Name (Required)</h4>
                </Name>
            </label>
            <input type="name" class="form-control" id="name" required>
        </div>
        <div class="form-group">
            <label for="photo">
                <h4>Link to Photo Image (Required)</h4>
            </label>
            <input type="photo" class="form-control" id="photo" required>
        </div>
        <form role="form">
            <div id="wrapper" class="form-group">
            </div>
        </form>
    </div>
    <footer class="footer">
        <div class="container">
            <p>
                <a href="/api/friends">API Table Link</a> |
                <a href="https://github.com/Dquez/FriendFinder">GitHub Repo</a>
            </p>
        </div>
    </footer>
    </div>
</body>

</html>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script type="text/javascript">
    let panel = $("#wrapper");
    var questions = [{
            question: "Your mind is always buzzing with unexplored ideas and plan.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }, {
            question: "Generally speaking, you rely more on your experience than your imagination.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }, {
            question: "You find it easy to stay relaxed and focused even when there is some pressure.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }, {
            question: "You rarely do something just out of sheer curiosity.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }, {
            question: "People can rarely upset you.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }, {
            question: "It is often difficult for you to relate to other people’s feelings.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }, {
            question: "In a discussion, truth should be more important than people’s sensitivities.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }, {
            question: "You rarely get carried away by fantasies and ideas.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        },
        {
            question: "You think that everyone’s views should be respected regardless of whether they are supported by facts or not.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        },
        {
            question: "You feel more energetic after spending time with a group of people.",
            answers: ["Select an option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"],
            values: [0, 1, 2, 3, 4, 5]
        }
    ];
    for (var i = 0; i < questions.length; i++) {
        panel.append("<h3> Question " + (i + 1) + "</h3>");
        panel.append("<h4>" + questions[i].question + "</h4>");
        let selectBox = $("<select>");
        selectBox.addClass("custom-select question-" + (i + 1));
        panel.append(selectBox);
        for (var j = 0; j < questions[j].answers.length; j++) {
            if (j == 0) {
                selectBox.append("<option value='" + questions[i].values[j] + "' disabled selected='default'>" +
                    questions[i].answers[j] +
                    "</option>");
            } else {
                selectBox.append("<option value='" + questions[i].values[j] + "'>" + questions[i].answers[j] +
                    "</option>");
            }
        }
        selectBox.append("</select>")
    }
    panel.append("<br><button id='done' class ='btn btn-primary'>Done</button>");

   
    // // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file
    $("#done").on("click", function (event) {
        event.preventDefault();
        let newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: []
        };
        for (var i = 0; i < questions.length; i++) {
            let thisQuestion = $(".question-" + (i + 1));
            newFriend.scores.push(parseInt(thisQuestion[0].value));
        }
        console.log(newFriend);

        // console.log(newReservation);
        // This line is the magic. It"s very similar to the standard ajax function we used.
        // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
        // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
        // depending on if a tables is available or not.
        // $.post("/api/tables", newReservation,
        //     function (data) {
        //         // If a table is available... tell user they are booked.
        //         if (data) {
        //             alert("Yay! You are officially booked!");
        //         }
        //         // If a table is available... tell user they on the waiting list.
        //         else {
        //             alert("Sorry you are on the wait list");
        //         }
        //         // Clear the form when submitting
        //         $("#reserve-name").val("");
        //         $("#reserve-phone").val("");
        //         $("#reserve-email").val("");
        //         $("#reserve-unique-id").val("");
        //     });
    });




    // // In this code, jQuery is used to "download" the data from our server
    // // We then dynamically display this content in our table. This is very similar to the group projects you just completed.
    // // It's also very similar to the NYT search application. In fact, I copied a ton of code from there.
    // function runTableQuery() {
    //     // Here we get the location of the root page.
    //     // We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
    //     var currentURL = window.location.origin;
    //     // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
    //     $.ajax({
    //             url: currentURL + "/api/tables",
    //             method: "GET"
    //         })
    //         .done(function (tableData) {
    //             // Here we are logging the URL so we have access to it for troubleshooting
    //             console.log("------------------------------------");
    //             console.log("URL: " + currentURL + "/api/tables");
    //             console.log("------------------------------------");
    //             // Here we then log the NYTData to console, where it will show up as an object.
    //             console.log(tableData);
    //             console.log("------------------------------------");
    //             // Loop through and display each of the customers
    //             for (var i = 0; i < tableData.length; i++) {
    //                 // Create the HTML Well (Section) and Add the table content for each reserved table
    //                 var tableSection = $("<div>");
    //                 tableSection.addClass("well");
    //                 tableSection.attr("id", "tableWell-" + i + 1);
    //                 $("#tableSection").append(tableSection);
    //                 var tableNumber = i + 1;
    //                 // Then display the remaining fields in the HTML (Section Name, Date, URL)
    //                 $("#tableWell-" + i + 1).append("<h2><span class='label label-primary'>" + tableNumber +
    //                     "</span> | " + tableData[i].customerID + "</h2>");
    //             }
    //         });
    // }

    // function runWaitListQuery() {
    //     // Here we get the location of the root page.
    //     // We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
    //     var currentURL = window.location.origin;
    //     // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
    //     $.ajax({
    //             url: currentURL + "/api/waitlist",
    //             method: "GET"
    //         })
    //         .done(function (waitlistData) {
    //             // Here we are logging the URL so we have access to it for troubleshooting
    //             console.log("------------------------------------");
    //             console.log("URL: " + currentURL + "/api/waitlist");
    //             console.log("------------------------------------");
    //             // Here we then log the NYTData to console, where it will show up as an object.
    //             console.log(waitlistData);
    //             console.log("------------------------------------");
    //             // Loop through and display each of the customers
    //             for (var i = 0; i < waitlistData.length; i++) {
    //                 // Create the HTML Well (Section) and Add the table content for each reserved table
    //                 var waitlistSection = $("<div>");
    //                 waitlistSection.addClass("well");
    //                 waitlistSection.attr("id", "waitlistWell-" + i + 1);
    //                 $("#waitlistSection").append(waitlistSection);
    //                 var tableNumber = i + 1;
    //                 // Then display the remaining fields in the HTML (Section Name, Date, URL)
    //                 $("#waitlistWell-" + i + 1).append("<h2><span class='label label-primary'>" + tableNumber +
    //                     "</span> | " + waitlistData[i].customerID + "</h2>");
    //             }
    //         });
    // }
    // // This function resets all of the data in our tables. This is intended to let you restart a demo.
    // function clearTable() {
    //     var currentURL = window.location.origin;
    //     $.ajax({
    //         url: currentURL + "/api/clear",
    //         method: "POST"
    //     });
    // }
    // $("#clear").on("click", function () {
    //     alert("Clearing...");
    //     clearTable();
    //     // Refresh the page after data is cleared
    //     location.reload();
    // });
    // // Run Queries!
    // // ==========================================
    // runTableQuery();
    // runWaitListQuery();
</script>